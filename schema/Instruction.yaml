title: Instruction
"@id": stencila:Instruction
extends: Executable
abstract: true
category: edits
description: Abstract base type for a document editing instruction.
required:
  - messages
core:
  - assignee
  - authors
  - provenance
properties:
  messages:
    '@id': stencila:messages
    description: Messages involved in the instruction.
    $comment: |
      This array of messages starts with the initial instruction from the
      user and includes responses from the agent performing the instruction,
      and potentially further instructions for refinement by the user.
    type: array
    items:
      $ref: InstructionMessage
    patch:
      formats: [md]
    dom:
      elem: div
  assignee:
    '@id': stencila:assignee
    description: An identifier for the agent assigned to perform the instruction
    type: string
    $comment: |
      This property is a string because on creation of the instruction the identifier has not yet been
      resolved into a person, organization, or software application.
        patch:
    patch:
      formats: [md]
    proptest:
      min:
        description: No assignee
        value: None
      high:
        description: Generate an arbitrary id using expected characters
        strategy: option::of(r"[a-zA-Z][a-zA-Z\-_/.@]")
      max:
        description: Generate an arbitrary assignee id using any characters
        strategy: option::of(String::arbitrary())
  authors:
    '@id': schema:author
    description: The authors of the instruction.
    type: array
    items:
      $ref: Author
    strip: [authors]
    dom:
      elem: span
  provenance:
    '@id': stencila:provenance
    description: A summary of the provenance of the messages and content within the instruction.
    type: array
    items:
      $ref: ProvenanceCount
    strip: [provenance]
    dom:
      elem: span
