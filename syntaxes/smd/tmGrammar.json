{
 "scopeName": "source.smd",
 "patterns": [
  {
   "include": "#frontMatter"
  },
  {
   "include": "#block"
  }
 ],
 "repository": {
  "block": {
   "patterns": [
    {
     "include": "#math-block"
    },
    {
     "include": "#code-chunk"
    },
    {
     "include": "#code-block"
    },
    {
     "include": "#include-block"
    },
    {
     "include": "#call-block"
    },
    {
     "include": "#instruction-block"
    },
    {
     "include": "#insert-block"
    },
    {
     "include": "#delete-block"
    },
    {
     "include": "#replace-block"
    },
    {
     "include": "#with-block"
    },
    {
     "include": "#for-block"
    },
    {
     "include": "#if-block"
    },
    {
     "include": "#else-block"
    },
    {
     "include": "#end-block"
    },
    {
     "include": "#figure-block"
    },
    {
     "include": "#table-block"
    },
    {
     "include": "#paragraph"
    }
   ]
  },
  "inline": {
   "patterns": [
    {
     "include": "#parameter"
    },
    {
     "include": "#math-inline"
    },
    {
     "include": "#instruction-inline"
    },
    {
     "include": "#insert-inline"
    },
    {
     "include": "#delete-inline"
    },
    {
     "include": "#replace-inline"
    }
   ]
  },
  "parameter": {
   "name": "meta.stencila.parameter",
   "match": "(\\&)\\[([\\w-]+)\\]",
   "captures": {
    "1": {
     "name": "markup.heading"
    },
    "2": {
     "name": "variable.name"
    }
   }
  },
  "math-block": {
   "name": "meta.stencila.math-block",
   "begin": "^(\\$\\$)$",
   "beginCaptures": {
    "1": {
     "name": "markup.heading"
    }
   },
   "end": "^(\\$\\$)$",
   "endCaptures": {
    "1": {
     "name": "markup.heading"
    }
   },
   "patterns": [
    {
     "contentName": "meta.embedded.language.tex",
     "include": "text.tex"
    }
   ]
  },
  "math-inline": {
   "name": "meta.stencila.math-inline",
   "match": "(\\$)(.*?)(\\$)",
   "captures": {
    "1": {
     "name": "markup.heading"
    },
    "2": {
     "patterns": [
      {
       "begin": ".*",
       "end": "$",
       "contentName": "meta.embedded.language.tex",
       "include": "text.tex"
      }
     ]
    },
    "3": {
     "name": "markup.heading"
    }
   }
  },
  "code-block": {
   "patterns": [
    {
     "include": "#code-block.javascript"
    },
    {
     "include": "#code-block.python"
    },
    {
     "include": "#code-block.r"
    },
    {
     "include": "#code-block.sql"
    },
    {
     "include": "#code-block.tex"
    },
    {
     "include": "#code-block.latex"
    },
    {
     "include": "#code-block.unknown-lang"
    }
   ]
  },
  "code-block.unknown-lang": {
   "name": "meta.stencila.code-block.unknown-lang",
   "begin": "(?x) ^\n  (`{3,})\n  \\s*\n  (.*)\n$\n",
   "beginCaptures": {
    "1": {
     "name": "markup.heading"
    },
    "2": {
     "name": "variable.other"
    }
   },
   "end": "^(`{3,})\\s*$",
   "endCaptures": {
    "1": {
     "name": "markup.heading"
    }
   }
  },
  "code-chunk": {
   "patterns": [
    {
     "include": "#code-chunk.javascript"
    },
    {
     "include": "#code-chunk.python"
    },
    {
     "include": "#code-chunk.r"
    },
    {
     "include": "#code-chunk.sql"
    },
    {
     "include": "#code-chunk.unknown-lang"
    },
    {
     "include": "#code-chunk.no-lang"
    }
   ]
  },
  "code-chunk.unknown-lang": {
   "name": "meta.stencila.code-chunk.unknown-lang",
   "begin": "(?x) ^\n  (`{3,})\n  \\s*\n  (\\w+)\n  \\s+\n  (exec)\n  \\s*\n$\n",
   "beginCaptures": {
    "1": {
     "name": "markup.heading"
    },
    "2": {
     "name": "variable.other"
    },
    "3": {
     "name": "keyword.control"
    }
   },
   "end": "^(`{3,})\\s*$",
   "endCaptures": {
    "1": {
     "name": "markup.heading"
    }
   }
  },
  "code-chunk.no-lang": {
   "name": "meta.stencila.code-chunk.no-lang",
   "begin": "(?x) ^\n  (`{3,})\n  \\s*\n  (exec)\n  \\s*\n$\n",
   "beginCaptures": {
    "1": {
     "name": "markup.heading"
    },
    "2": {
     "name": "keyword.control"
    }
   },
   "end": "^(`{3,})\\s*$",
   "endCaptures": {
    "1": {
     "name": "markup.heading"
    }
   }
  },
  "instruction-block": {
   "name": "meta.stencila.instruction-block",
   "match": "(?x) ^\n  (:{3,})\n  \\s*\n  (do)\n  \\s+\n  (?:\n    (@)\n    ([\\w-]*)\n    \\s*\n  )?\n  (.*)\n$\n",
   "captures": {
    "1": {
     "name": "markup.heading"
    },
    "2": {
     "name": "keyword.control"
    },
    "3": {
     "name": "punctuation.definition"
    },
    "4": {
     "name": "variable.name"
    },
    "5": {
     "name": "comment.line"
    }
   }
  },
  "with-block": {
   "name": "meta.stencila.with-block",
   "match": "^(:{3,})\\s*(with)\\s*$",
   "captures": {
    "1": {
     "name": "markup.heading"
    },
    "2": {
     "name": "keyword.control"
    }
   }
  },
  "instruction-inline": {
   "name": "meta.stencila.instruction-inline",
   "match": "(?x) \\[\\[\n  \\s*\n  (do)\n  \\s+\n  (?:\n    (@)\n    ([\\w-]*)\n    \\s*\n  )?\n  (.*?)\n  (?:\n    (>>)\n    (.*?)\n  )?\n\\]\\]\n",
   "captures": {
    "1": {
     "name": "keyword.control"
    },
    "2": {
     "name": "punctuation.definition"
    },
    "3": {
     "name": "variable.name"
    },
    "4": {
     "name": "comment.line"
    },
    "5": {
     "name": "keyword.control"
    }
   }
  },
  "insert-block": {
   "name": "meta.stencila.insert-block",
   "match": "(?x) ^\n  (:{3,})\n  \\s*\n  (insert)\n  \\s+\n  (?:\n    (accept)|\n    (reject)|\n    .*\n  )?\n  \\s*\n$\n",
   "captures": {
    "1": {
     "name": "markup.heading"
    },
    "2": {
     "name": "keyword.control"
    },
    "3": {
     "name": "token.info-token"
    },
    "4": {
     "name": "token.error-token"
    }
   }
  },
  "insert-inline": {
   "name": "meta.stencila.insert-inline",
   "match": "(?x) \\[\\[\n  \\s*\n  (insert)\n  \\s\n  (.*?)\n\\]\\]\n",
   "captures": {
    "1": {
     "name": "keyword.control"
    }
   }
  },
  "delete-block": {
   "name": "meta.stencila.delete-block",
   "match": "(?x) ^\n  (:{3,})\n  \\s*\n  (delete)\n  \\s+\n  (?:\n    (accept)|\n    (reject)|\n    .*\n  )?\n  \\s*\n$\n",
   "captures": {
    "1": {
     "name": "markup.heading"
    },
    "2": {
     "name": "keyword.control"
    },
    "3": {
     "name": "token.info-token"
    },
    "4": {
     "name": "token.error-token"
    }
   }
  },
  "delete-inline": {
   "name": "meta.stencila.delete-inline",
   "match": "(?x) \\[\\[\n  \\s*\n  (delete)\n  \\s\n  (.*?)\n\\]\\]\n",
   "captures": {
    "1": {
     "name": "keyword.control"
    }
   }
  },
  "replace-block": {
   "name": "meta.stencila.replace-block",
   "match": "(?x) ^\n  (:{3,})\n  \\s*\n  (replace)\n  \\s+\n  (?:\n    (accept)|\n    (reject)|\n    .*\n  )?\n  \\s*\n$\n",
   "captures": {
    "1": {
     "name": "markup.heading"
    },
    "2": {
     "name": "keyword.control"
    },
    "3": {
     "name": "token.info-token"
    },
    "4": {
     "name": "token.error-token"
    }
   }
  },
  "replace-inline": {
   "name": "meta.stencila.replace-inline",
   "match": "(?x) \\[\\[\n  \\s*\n  (replace)\n  \\s\n  (.*?)\n  (>>)\n  (.*?)\n\\]\\]\n",
   "captures": {
    "1": {
     "name": "keyword.control"
    },
    "3": {
     "name": "keyword.control"
    }
   }
  },
  "include-block": {
   "name": "meta.stencila.include-block",
   "match": "^(:{3,})\\s*(include)\\s+(.*)$",
   "captures": {
    "1": {
     "name": "markup.heading"
    },
    "2": {
     "name": "keyword.control"
    },
    "3": {
     "name": "variable.name"
    }
   }
  },
  "call-block": {
   "name": "meta.stencila.call-block",
   "match": "^(:{3,})\\s*(call)\\s+(.*)$",
   "captures": {
    "1": {
     "name": "markup.heading"
    },
    "2": {
     "name": "keyword.control"
    },
    "3": {
     "name": "variable.name"
    }
   }
  },
  "if-block": {
   "name": "meta.stencila.if-block",
   "match": "^(:{3,})\\s*(if|elif)\\s+(.*)$",
   "captures": {
    "1": {
     "name": "markup.heading"
    },
    "2": {
     "name": "keyword.control"
    },
    "3": {
     "patterns": [
      {
       "begin": ".*",
       "end": "$",
       "contentName": "meta.embedded.language.javascript",
       "include": "source.js"
      }
     ]
    }
   }
  },
  "else-block": {
   "name": "meta.stencila.else-block",
   "match": "^(:{3,})\\s*(else)\\s*$",
   "captures": {
    "1": {
     "name": "markup.heading"
    },
    "2": {
     "name": "keyword.control"
    }
   }
  },
  "end-block": {
   "name": "meta.stencila.end-block",
   "match": "^(:{3,})\\s*$",
   "captures": {
    "1": {
     "name": "markup.heading"
    }
   }
  },
  "for-block": {
   "patterns": [
    {
     "include": "#for-block.sql"
    },
    {
     "include": "#for-block.no-lang"
    }
   ]
  },
  "for-block.sql": {
   "name": "meta.stencila.for-block.sql",
   "match": "^(:{3,})\\s*(for)\\s+([\\w]+)\\s+(in)\\s+(select\\s*.*)$",
   "captures": {
    "1": {
     "name": "markup.heading"
    },
    "2": {
     "name": "keyword.control"
    },
    "3": {
     "name": "variable.name"
    },
    "4": {
     "name": "keyword.control"
    },
    "5": {
     "patterns": [
      {
       "begin": ".*",
       "end": "$",
       "contentName": "meta.embedded.language.sql",
       "include": "source.sql"
      }
     ]
    }
   }
  },
  "for-block.no-lang": {
   "name": "meta.stencila.for-block.no-lang",
   "match": "^(:{3,})\\s*(for)\\s+([\\w]+)\\s+(in)\\s+(.*)$",
   "captures": {
    "1": {
     "name": "markup.heading"
    },
    "2": {
     "name": "keyword.control"
    },
    "3": {
     "name": "variable.name"
    },
    "4": {
     "name": "keyword.control"
    },
    "5": {
     "patterns": [
      {
       "begin": ".*",
       "end": "$",
       "contentName": "meta.embedded.language.javascript",
       "include": "source.js"
      }
     ]
    }
   }
  },
  "figure-block": {
   "name": "meta.stencila.figure-block",
   "match": "(?x) ^\n  (:{3,})\n  \\s*\n  (figure)\n  \\s+\n  (.*)\n$\n",
   "captures": {
    "1": {
     "name": "markup.heading"
    },
    "2": {
     "name": "keyword.control"
    },
    "3": {
     "name": "variable.name"
    }
   }
  },
  "table-block": {
   "name": "meta.stencila.table-block",
   "match": "(?x) ^\n  (:{3,})\n  \\s*\n  (table)\n  \\s+\n  (.*)\n$\n",
   "captures": {
    "1": {
     "name": "markup.heading"
    },
    "2": {
     "name": "keyword.control"
    },
    "3": {
     "name": "variable.name"
    }
   }
  },
  "paragraph": {
   "name": "meta.stencila.paragraph",
   "begin": "(^|\\G)[ ]{0,3}(?=[^ \\t\\n])",
   "while": "(^|\\G)((?=\\s*[-=]{3,}\\s*$)|[ ]{4,}(?=[^ \\t\\n]))",
   "patterns": [
    {
     "include": "#inline"
    }
   ]
  },
  "frontMatter": {
   "begin": "\\A-{3}\\s*$",
   "end": "(^|\\G)-{3}|\\.{3}\\s*$",
   "contentName": "meta.embedded.block.frontmatter",
   "patterns": [
    {
     "include": "source.yaml"
    }
   ]
  },
  "code-block.javascript": {
   "name": "meta.stencila.code-block.javascript",
   "begin": "(?x) ^\n  (`{3,})\n  \\s*\n  (js|javascript)\n  \\s*\n$\n",
   "beginCaptures": {
    "1": {
     "name": "markup.heading"
    },
    "2": {
     "name": "variable.other"
    }
   },
   "end": "^(`{3,})\\s*$",
   "endCaptures": {
    "1": {
     "name": "markup.heading"
    }
   },
   "patterns": [
    {
     "include": "source.js"
    }
   ]
  },
  "code-block.python": {
   "name": "meta.stencila.code-block.python",
   "begin": "(?x) ^\n  (`{3,})\n  \\s*\n  (py|python)\n  \\s*\n$\n",
   "beginCaptures": {
    "1": {
     "name": "markup.heading"
    },
    "2": {
     "name": "variable.other"
    }
   },
   "end": "^(`{3,})\\s*$",
   "endCaptures": {
    "1": {
     "name": "markup.heading"
    }
   },
   "patterns": [
    {
     "include": "source.python"
    }
   ]
  },
  "code-block.r": {
   "name": "meta.stencila.code-block.r",
   "begin": "(?x) ^\n  (`{3,})\n  \\s*\n  (r|R)\n  \\s*\n$\n",
   "beginCaptures": {
    "1": {
     "name": "markup.heading"
    },
    "2": {
     "name": "variable.other"
    }
   },
   "end": "^(`{3,})\\s*$",
   "endCaptures": {
    "1": {
     "name": "markup.heading"
    }
   },
   "patterns": [
    {
     "include": "source.r"
    }
   ]
  },
  "code-block.sql": {
   "name": "meta.stencila.code-block.sql",
   "begin": "(?x) ^\n  (`{3,})\n  \\s*\n  (sql)\n  \\s*\n$\n",
   "beginCaptures": {
    "1": {
     "name": "markup.heading"
    },
    "2": {
     "name": "variable.other"
    }
   },
   "end": "^(`{3,})\\s*$",
   "endCaptures": {
    "1": {
     "name": "markup.heading"
    }
   },
   "patterns": [
    {
     "include": "source.sql"
    }
   ]
  },
  "code-block.tex": {
   "name": "meta.stencila.code-block.tex",
   "begin": "(?x) ^\n  (`{3,})\n  \\s*\n  (tex)\n  \\s*\n$\n",
   "beginCaptures": {
    "1": {
     "name": "markup.heading"
    },
    "2": {
     "name": "variable.other"
    }
   },
   "end": "^(`{3,})\\s*$",
   "endCaptures": {
    "1": {
     "name": "markup.heading"
    }
   },
   "patterns": [
    {
     "include": "text.tex"
    }
   ]
  },
  "code-block.latex": {
   "name": "meta.stencila.code-block.latex",
   "begin": "(?x) ^\n  (`{3,})\n  \\s*\n  (latex)\n  \\s*\n$\n",
   "beginCaptures": {
    "1": {
     "name": "markup.heading"
    },
    "2": {
     "name": "variable.other"
    }
   },
   "end": "^(`{3,})\\s*$",
   "endCaptures": {
    "1": {
     "name": "markup.heading"
    }
   },
   "patterns": [
    {
     "include": "text.tex.latex"
    }
   ]
  },
  "code-chunk.javascript": {
   "name": "meta.stencila.code-chunk.javascript",
   "begin": "(?x) ^\n  (`{3,})\n  \\s*\n  (js|javascript)\n  \\s+\n  (exec)\n  \\s*\n$\n",
   "beginCaptures": {
    "1": {
     "name": "markup.heading"
    },
    "2": {
     "name": "variable.other"
    },
    "3": {
     "name": "keyword.control"
    }
   },
   "end": "^(`{3,})\\s*$",
   "endCaptures": {
    "1": {
     "name": "markup.heading"
    }
   },
   "patterns": [
    {
     "include": "source.js"
    }
   ]
  },
  "code-chunk.python": {
   "name": "meta.stencila.code-chunk.python",
   "begin": "(?x) ^\n  (`{3,})\n  \\s*\n  (py|python)\n  \\s+\n  (exec)\n  \\s*\n$\n",
   "beginCaptures": {
    "1": {
     "name": "markup.heading"
    },
    "2": {
     "name": "variable.other"
    },
    "3": {
     "name": "keyword.control"
    }
   },
   "end": "^(`{3,})\\s*$",
   "endCaptures": {
    "1": {
     "name": "markup.heading"
    }
   },
   "patterns": [
    {
     "include": "source.python"
    }
   ]
  },
  "code-chunk.r": {
   "name": "meta.stencila.code-chunk.r",
   "begin": "(?x) ^\n  (`{3,})\n  \\s*\n  (r|R)\n  \\s+\n  (exec)\n  \\s*\n$\n",
   "beginCaptures": {
    "1": {
     "name": "markup.heading"
    },
    "2": {
     "name": "variable.other"
    },
    "3": {
     "name": "keyword.control"
    }
   },
   "end": "^(`{3,})\\s*$",
   "endCaptures": {
    "1": {
     "name": "markup.heading"
    }
   },
   "patterns": [
    {
     "include": "source.r"
    }
   ]
  },
  "code-chunk.sql": {
   "name": "meta.stencila.code-chunk.sql",
   "begin": "(?x) ^\n  (`{3,})\n  \\s*\n  (sql)\n  \\s+\n  (exec)\n  \\s*\n$\n",
   "beginCaptures": {
    "1": {
     "name": "markup.heading"
    },
    "2": {
     "name": "variable.other"
    },
    "3": {
     "name": "keyword.control"
    }
   },
   "end": "^(`{3,})\\s*$",
   "endCaptures": {
    "1": {
     "name": "markup.heading"
    }
   },
   "patterns": [
    {
     "include": "source.sql"
    }
   ]
  }
 }
}